<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>ZTA – Redeem Your Rank</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@900&family=Exo+2:wght@600;900&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box;}
body{
    font-family:'Exo 2',sans-serif;background:#000;color:#fff;min-height:100vh;
    background:radial-gradient(circle at 50% 50%, #0f0529 0%, #000 70%);overflow-x:hidden;
}
canvas{position:fixed;top:0;left:0;width:100%;height:100%;z-index:1;opacity:0.7;}

.navbar{
    position:fixed;top:0;width:100%;padding:22px 6%;display:flex;
    justify-content:space-between;align-items:center;z-index:9999;
    background:rgba(10,5,40,0.85);backdrop-filter:blur(30px);
    border-bottom:4px solid #9acd32;box-shadow:0 30px 100px rgba(0,0,0,0.9);
}
.logo{font-family:'Orbitron',sans-serif;font-size:48px;font-weight:900;letter-spacing:18px;
      background:linear-gradient(90deg,#9acd32,#72fe95);-webkit-background-clip:text;
      -webkit-text-fill-color:transparent;text-shadow:0 0 80px #9acd32;}

.hero{
    height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;
    position:relative;text-align:center;z-index:2;
}
.hero::before{content:"";position:absolute;inset:0;
              background:linear-gradient(135deg,rgba(10,0,60,0.95),rgba(0,0,0,0.98));}
.hero-title{
    font-family:'Orbitron',sans-serif;font-size:clamp(70px,16vw,160px);
    background:linear-gradient(90deg,#9acd32,#ffffff,#9acd32);
    -webkit-background-clip:text;-webkit-text-fill-color:transparent;
    text-shadow:0 0 150px #9acd32;letter-spacing:25px;
    animation:levitate 10s ease-in-out infinite;
}
.hero-subtitle{
    font-size:32px;color:#72fe95;margin-top:30px;letter-spacing:8px;
    text-shadow:0 0 60px #72fe95;
}

.redeem-box{
    max-width:800px;margin:100px auto;padding:60px;
    background:rgba(20,10,80,0.7);border-radius:50px;
    border:4px solid rgba(154,205,50,0.4);backdrop-filter:blur(30px);
    text-align:center;box-shadow:0 60px 200px rgba(154,205,50,0.4);z-index:2;
}
.redeem-input{
    width:100%;padding:25px;font-size:28px;text-align:center;
    background:rgba(0,0,0,0.7);border:3px solid #9acd32;border-radius:30px;
    color:#fff;outline:none;transition:all .5s;margin-bottom:40px;
}
.redeem-input:focus{border-color:#c6ff7a;box-shadow:0 0 80px rgba(154,205,50,0.8);}
.redeem-btn{
    background:#9acd32;color:#000;padding:20px 80px;border-radius:80px;
    font-size:28px;font-weight:900;cursor:pointer;
    box-shadow:0 0 100px rgba(154,205,50,0.9);transition:all .6s;
}
.redeem-btn:hover{background:#c6ff7a;transform:scale(1.15);}

footer{text-align:center;padding:140px 20px;color:#555;font-size:18px;
       border-top:4px solid rgba(154,205,50,0.3);background:rgba(0,0,0,0.8);margin-top:200px;}

@keyframes levitate{0%,100%{transform:translateY(0);}50%{transform:translateY(-80px);}}
</style>
</head>
<body>

<canvas id="stars"></canvas>

<div class="navbar">
    <div class="logo">ZTA</div>
</div>

<div class="hero">
    <h1 class="hero-title">REDEEM YOUR RANK</h1>
    <p class="hero-subtitle">Enter your cosmic code below</p>
</div>

<div class="redeem-box">
    <input type="text" class="redeem-input" id="codeInput" placeholder="ENTER CODE HERE" maxlength="20">
    <button class="redeem-btn" onclick="redeemCode()">REDEEM NOW</button>
    <p id="status" style="margin-top:30px;font-size:24px;color:#72fe95;"></p>
</div>

<footer>© 2025 ZTA — Rise Through the Ranks</footer>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
<script src="firebase.js"></script>

<script>
// Protect Page
ZeroX.onAuthChange(user => {
    if (!user) {
        alert("Login required");
        window.location.href = "login.html";
    }
});

// =============================
// 20 BEST SECURE RANK CODES
// =============================

const rankCodes = {
    "VX9e!mA2Qf#7": "Starlight Beginner",
    "pL4$X7wq@D8r": "Night Sky Explorer",
    "Zu1!kM9#Tf4P": "Lens Apprentice",
    "R3q%vB!8nL2s": "Star Tracker",
    "yT7@Fh2$Qm6K": "Deep-Sky Learner",
    "Jx8&bP1!Zw4r": "Celestial Shooter",
    "mQ9@tC5#Hv2E": "Cosmic Observer",
    "Wf3!Zk7%Ua9p": "Galaxy Seeker",
    "Tg6$R2n@Yp4V": "Nebula Hunter",
    "Bq1!S8m%Xe7H": "Meteor Master",
    "Fv4#hP9*Ld3C": "Astro Voyager",
    "Kw2!R7q@Mz6S": "Sky Illumination Pro",
    "Pj3$N8l#Tc5A": "Cosmic Artisan",
    "Sf9@xB4!Hm1D": "Interstellar Photographer",
    "Lk5#Q2n!Vz8M": "Deep-Space Elite",
    "Rg7!Wm3$Td9F": "Astro Imaging Expert",
    "Uc8@Kp6#Hb2L": "Galactic Master",
    "Yn4!Sd1%Xj7Q": "Nebula Grandmaster",
    "Zt6#Mw8@Pc3F": "Celestial Legend",
    "Qx9$Fe5!Vr2B": "Universe Prime"
};

// =============================
// REDEEM FUNCTION
// =============================
function redeemCode() {
    const input = document.getElementById("codeInput").value.trim();
    const status = document.getElementById("status");

    if (!rankCodes[input]) {
        status.textContent = "❌ Invalid code";
        status.style.color = "#ff3333";
        return;
    }

    const db = firebase.firestore();
    const user = ZeroX.user();

    // Check if used
    db.collection("usedCodes").doc(input).get().then(doc => {
        if (doc.exists) {
            status.textContent = "❌ Code already redeemed";
            status.style.color = "#ff4444";
            return;
        }

        // Mark as used
        db.collection("usedCodes").doc(input).set({
            usedBy: user.uid,
            usedAt: Date.now()
        });

        // Update user rank + badge
        db.collection("users").doc(user.uid).update({
            rank: rankCodes[input],
            badge: rankCodes[input]
        }).then(() => {
            status.textContent = "✔ RANK UNLOCKED: " + rankCodes[input];
            status.style.color = "#72fe95";
            document.getElementById("codeInput").value = "";
        });
    });
}

// =============================
// STARFIELD ANIMATION
// =============================
const canvas=document.getElementById('stars');
const ctx=canvas.getContext('2d');
let w=canvas.width=innerWidth,h=canvas.height=innerHeight;
const stars=[];
for(let i=0;i<1000;i++)stars.push({x:Math.random()*w,y:Math.random()*h,r:Math.random()*3,s:Math.random()*0.9+0.2});
function animate(){
    ctx.clearRect(0,0,w,h);
    ctx.fillStyle="#9acd32";
    stars.forEach(s=>{
        ctx.globalAlpha=s.s;ctx.beginPath();ctx.arc(s.x,s.y,s.r,0,Math.PI*2);ctx.fill();
        s.y+=1.2;if(s.y>h)s.y=0;
    });
    requestAnimationFrame(animate);
}
animate();
window.addEventListener('resize',()=>{w=canvas.width=innerWidth;h=canvas.height=innerHeight;});
</script>
</body>
</html>
